# NuDesk 개발 규칙 (Rules)

## 🚨 **중요 원칙**

### **1. Supabase Authentication 미사용**
- **절대 Supabase Auth를 사용하지 않습니다.**
- 모든 인증/인가 로직은 직접 데이터베이스(`public.profiles`)에서 처리합니다.
- 세션 관리는 클라이언트 사이드 `localStorage`(`getCurrentSession()`)에서 수행합니다.

### **2. UI/UX 표준화 (shadcn/ui 기반)**
- **공통 레이아웃**: 모든 페이지는 `PageContainer`와 `PageHeader`를 사용합니다.
- **다이얼로그 표준**: 모든 Dialog는 `max-h-[90vh]`와 `ScrollArea`를 적용하여 내용이 많을 경우 내부 스크롤이 생기도록 합니다. (Header/Footer 고정)
- **목록 비어있음 (Empty State)**: 관련 아이콘, `text-lg font-black` 제목, `text-[#9CA3AF] text-sm` 설명문을 포함한 센터 정렬 디자인을 사용합니다.
- **아이콘 통일**: 모든 등록/생성 버튼은 `Plus` 아이콘을 사용합니다. 사이드바와 페이지 헤더의 아이콘은 동일하게 유지합니다.
- **테이블 스타일 (공통 규격)**:
    - **여백**: `py-6` (수직), `pl-10` (첫 컬럼), `pr-10` (마지막 컬럼).
    - **폰트 크기**: 
        - 헤더(`th`): 12px
        - 셀 일반 텍스트 및 배지: 12px ~ 14px (이메일, 연락처, 기간 등은 14px)
        - 주요 명칭(제목, 페이지별 핵심 프로젝트/고객사명): 16px
        - **특이사항**: 접수 리스트의 [프로젝트명] 및 프로젝트 관리의 [고객사명]은 14px로 표기합니다.
    - **폰트 굵기**: 모든 텍스트는 `font-black` 또는 `font-bold`를 사용하여 강렬하게 표기합니다.
    - **색상**: 주요 명칭은 `text-zinc-900`, 그 외 모든 데이터는 `#9CA3AF` 색상을 사용합니다.
    - **포맷**: 연도 4자리(`YYYY.MM.DD`), 데이터 부재 시 하이픈(`---`) 처리를 준수합니다.

### **3. 테마 및 색상 규격**
- **브랜딩**: 로그인 페이지 및 사이드바에 `/logo.png`를 사용합니다. 로고는 둥근 사각형(`rounded-xl` 또는 `rounded-[2rem]`) 스타일로 감쌉니다.
- **배경색**: 전체 배경 `#E9ECEF`, 메인 컨텐츠 영역 `bg-white` (둥근 모서리 `rounded-[3rem]` 및 `shadow-inner`).
- **팔레트**:
    - Navy: `#242F67` (MASTER, 요청 상태)
    - Green: `#82B326` (ADMIN, 진행 상태, 활성화 버튼)
    - Orange: `#F6AD55` (STAFF, 대기 상태)
    - Red: `#E53E3E` (지연 상태, 긴급, 비활성화/초기화 버튼)
    - Pink: `#D98ADA` (CUSTOMER 역할)
    - Gray: `#9CA3AF` (비활성 상태, 완료 상태, 보조 텍스트)
- **배지 스타일**: 모든 상태 및 권한 배지는 `variant="outline"`의 보더 스타일을 사용합니다.
- **버튼 액션**: 비활성화/초기화는 Red, 활성화는 Green 계열을 사용하며, Hover 시 `bg-[color]/5` 투명도를 적용합니다.

### **3. 티켓 및 프로젝트 관리 로직**
- **비즈니스 데이 계산**: 종료 일자는 주말 및 공휴일을 제외한 영업일 기준으로 계산합니다.
- **고객사 배정**: `CUSTOMER` 유저는 반드시 고객사에 소속되어야 하며, 소속 프로젝트가 1개일 경우 티켓 등록 시 자동 지정됩니다.
- **접수 유형**: 고객사 유저는 '온라인'으로 고정되며, 관리자/직원은 '온라인, 전화, 팩스, 이메일' 중 선택 가능합니다.

## 🛠️ **메뉴 구성 및 순서**
1. **접수 리스트** (`/dashboard/tickets`)
2. **인력 관리** (`/admin/users`) - MASTER, ADMIN 전용
3. **고객사 관리** (`/admin/customers`) - MASTER, ADMIN 전용
4. **프로젝트 관리** (`/dashboard/projects`) - MASTER, ADMIN 전용

## 📊 **데이터베이스 및 데이터 모델**
- `profiles`: 사용자 계정 및 소속 정보
- `customers`: 고객사 정보 및 관련 서류
- `projects`: 프로젝트 정보 (상세 설명 필드 없음)
- `tickets`: 업무 접수 정보 (카테고리 필드 없음)

## 🛠️ **AI 작업 원칙**
1. **설명보다 실행**: 코드는 즉시 파일에 적용합니다.
2. **무결성 검사**: 수정 후 `read_lints`로 ReferenceError 및 구문 오류를 확인합니다.
3. **권한 기반 UI**: `MASTER`는 등록 버튼 비노출, `CUSTOMER`는 간소화된 폼 제공 등 역할별 권한을 엄격히 적용합니다.

---
*이 규칙은 프로젝트의 무결성과 일관성을 유지하기 위해 작성되었습니다.*
